<!DOCTYPE html>
<html>
<head>
    <title>Simple API Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            background: #f0f0f0;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .success { border-color: green; }
        .error { border-color: red; }
    </style>
</head>
<body>
    <h1>Simple API Test</h1>
    <button onclick="testAPI()">Test API</button>
    <div id="results"></div>
    
    <script>
        function testAPI() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="result">Testing /api/stats...</div>';
            
            // Simple fetch
            fetch('/api/stats')
                .then(response => {
                    console.log('Response status:', response.status);
                    console.log('Response headers:', response.headers);
                    return response.json();
                })
                .then(data => {
                    console.log('Data received:', data);
                    resultsDiv.innerHTML = '<div class="result success">Success! Data: ' + JSON.stringify(data) + '</div>';
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    resultsDiv.innerHTML = '<div class="result error">Error: ' + error.message + '</div>';
                    
                    // Try XMLHttpRequest as fallback
                    const xhr = new XMLHttpRequest();
                    xhr.open('GET', '/api/stats', true);
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState === 4) {
                            if (xhr.status === 200) {
                                resultsDiv.innerHTML += '<div class="result success">XMLHttpRequest worked! Data: ' + xhr.responseText.substring(0, 100) + '...</div>';
                            } else {
                                resultsDiv.innerHTML += '<div class="result error">XMLHttpRequest failed with status: ' + xhr.status + '</div>';
                            }
                        }
                    };
                    xhr.send();
                });
        }
        
        // Auto-test on load
        window.onload = testAPI;
    </script>
</body>
</html>